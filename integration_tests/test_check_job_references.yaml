defaults:
    config: |
        [job_linter]
        only_run = check_job_references
cases:
    - name: test_check_job_references_passes
      description: |
          Test that valid job references don't cause failure
      jobs.yaml: |
          - job:
              name: test-job
          - job:
              name: other-test-job
              builders:
                  - trigger-builds:
                      - project: test-job
      expected_output: ""
      expect_success: True

    - name: test_missing_trigger_builds_builder_target_errors
      description: |
          Test that a missing trigger-builds builder target errors out
      jobs.yaml: |
          - job:
              name: test-job
              builders:
                  - trigger-builds:
                      - project: missing-job
      expected_output: |
          test-job: checking job references: FAIL: Reference to missing object missing-job
      expect_success: False
